language: python
python:
  - 2.7.6
  
addons:
  firefox: "48.0"
  
services:
  - selenium
  
build:
  ci:
    - "sudo wget https://github.com/mozilla/geckodriver/releases/download/v0.11.1/geckodriver-v0.11.1-linux64.tar.gz"
    - "sudo tar -zxvf geckodriver-v0.11.1-linux64.tar.gz"
    - "sudo ln -sf /tmp/geckodriver/geckodriver /usr/bin/geckodriver"
    - "pip install robotframework"
    - "pip install -U requests"
    - "pip install -U robotframework-requests"
    - "pip install robotframework-Selenium2Library"
    - "pip install urllib3 --upgrade --trusted-host https://pypi.python.org"
    - "cd /root/src/github.com/Manakel166/OnlineBanking/"
    - "python OnlineBanking.py  &"
    - "cd /root/src/github.com/Manakel166/OnlineBanking/tests"
    - "python -m robot.run --variable ExecutionMode:API --xunit /root/src/github.com/Manakel166/OnlineBanking/shippable/testresults/RF_API_TESTS.xml OnlineBanking_BDD-ProgressiveTesting.robot"
    - "DISPLAY=:99.0"
    - "xvfb-run python -m robot.run --variable ExecutionMode:GUI --variable url_test_grid:http://127.0.0.1:4444/wd/hub --xunit /root/src/github.com/Manakel166/OnlineBanking/shippable/testresults/RF_GUI_TESTS.xml OnlineBanking_BDD-ProgressiveTesting.robot"
